/*! License information can be found in licenseFile */
(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{15:function(t,e,n){"use strict";(function(t,i){n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return Pn}));var r,o,a=n(13);(o=r=r||{}).afterCreate="afterCreate",o.afterAttach="afterAttach",o.afterCreationFinalization="afterCreationFinalization",o.beforeDetach="beforeDetach",o.beforeDestroy="beforeDestroy";var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function p(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return(u=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function c(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(a=(o<3?r(a):3<o?r(e,n,a):r(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function f(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}function d(t){return ut(t,1),ct(t).type}function y(t,e){return ut(t,1),Dt(),ct(t).onSnapshot(e)}function v(t,e){ut(t,1),Nt(),ct(t).applyPatches(_t(e))}var b=(Object.defineProperty(g.prototype,"subpath",{get:function(){return this._subpath},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"state",{get:function(){return this._state},set:function(t){var e=this.isAlive;this._state=t;var n=this.isAlive;this.aliveAtom&&e!==n&&this.aliveAtom.reportChanged()},enumerable:!0,configurable:!0}),g.prototype.fireInternalHook=function(t){this._hookSubscribers&&this._hookSubscribers.emit(t,this,t)},g.prototype.registerHook=function(t,e){return this._hookSubscribers||(this._hookSubscribers=new Ct),this._hookSubscribers.register(t,e)},Object.defineProperty(g.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),g.prototype.baseSetParent=function(t,e){this._parent=t,this._subpath=e,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()},Object.defineProperty(g.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!0,configurable:!0}),g.prototype.getEscapedPath=function(t){return t&&(this.pathAtom||(this.pathAtom=Object(a.m)("path")),this.pathAtom.reportObserved()),this.parent?(void 0===this._escapedSubpath&&(this._escapedSubpath=this._subpath?kt(this._subpath):""),this.parent.getEscapedPath(t)+"/"+this._escapedSubpath):""},Object.defineProperty(g.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"isAlive",{get:function(){return this.state!==et.DEAD},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"isDetaching",{get:function(){return this.state===et.DETACHING},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=Object(a.m)("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!0,configurable:!0}),g.prototype.baseFinalizeCreation=function(t){if(this.state===et.CREATED){if(this.parent){if(this.parent.state!==et.FINALIZED)return;this.fireHook(r.afterAttach)}this.state=et.FINALIZED,t&&t()}},g.prototype.baseFinalizeDeath=function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=et.DEAD},g.prototype.baseAboutToDie=function(){this.fireHook(r.beforeDestroy)},g);function g(t,e,n,i){this.type=t,this.environment=i,this._state=et.INITIALIZING,this.environment=i,this.baseSetParent(e,n)}var m,w=(p(_,m=b),Object.defineProperty(_.prototype,"root",{get:function(){if(!this.parent)throw bt("This scalar node is not part of a tree");return this.parent.root},enumerable:!0,configurable:!0}),_.prototype.setParent=function(t,e){var n=this.parent!==t,i=this.subpath!==e;(n||i)&&(this.environment=void 0,this.baseSetParent(this.parent,e))},Object.defineProperty(_.prototype,"snapshot",{get:function(){return this.getSnapshot()},enumerable:!0,configurable:!0}),_.prototype.getSnapshot=function(){return this.type.getSnapshot(this)},_.prototype.toString=function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+t+(this.isAlive?"":" [dead]")},_.prototype.die=function(){this.isAlive&&this.state!==et.DETACHING&&(this.aboutToDie(),this.finalizeDeath())},_.prototype.finalizeCreation=function(){this.baseFinalizeCreation()},_.prototype.aboutToDie=function(){this.baseAboutToDie()},_.prototype.finalizeDeath=function(){this.baseFinalizeDeath()},_.prototype.fireHook=function(t){this.fireInternalHook(t)},c([a.j],_.prototype,"die",null),_);function _(t,e,n,i,r){var o=m.call(this,t,e,n,i)||this;try{o.storedValue=t.createNewInstance(r)}catch(t){throw o.state=et.DEAD,t}return o.state=et.CREATED,o.finalizeCreation(),o}var S,P,A,I=1,O={onError:function(t){throw t}},j=(p(C,S=b),C.prototype.applyPatches=function(t){this.createObservableInstanceIfNeeded(),this._applyPatches(t)},C.prototype.applySnapshot=function(t){this.createObservableInstanceIfNeeded(),this._applySnapshot(t)},C.prototype.createObservableInstanceIfNeeded=function(){var t,e;if(0===this._observableInstanceState){this._observableInstanceState=1;for(var n=[],i=this.parent;i&&0===i._observableInstanceState;)n.unshift(i),i=i.parent;try{for(var o=h(n),s=o.next();!s.done;s=o.next())s.value.createObservableInstanceIfNeeded()}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}var p=this.type;try{this.storedValue=p.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,p.finalizeNewInstance(this,this.storedValue)}catch(e){throw this.state=et.DEAD,e}finally{this._isRunningAction=!1}this._observableInstanceState=2,this,"snapshot",Object(a.o)(this,"snapshot").trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=yt,this.state=et.CREATED,this.fireHook(r.afterCreate),this.finalizeCreation()}},Object.defineProperty(C.prototype,"root",{get:function(){var t=this.parent;return t?t.root:this},enumerable:!0,configurable:!0}),C.prototype.clearParent=function(){if(this.parent){this.fireHook(r.beforeDetach);var t=this.state;this.state=et.DETACHING;var e=this.root,n=e.environment,i=e.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=n,this.identifierCache=i}finally{this.state=t}}},C.prototype.setParent=function(t,e){var n=t!==this.parent,i=e!==this.subpath;(n||i)&&(n?(this.environment=void 0,t.root.identifierCache.mergeCache(this),this.baseSetParent(t,e),this.fireHook(r.afterAttach)):i&&this.baseSetParent(this.parent,e))},C.prototype.fireHook=function(t){var e=this;this.fireInternalHook(t);var n=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[t];"function"==typeof n&&(a.e?Object(a.e)((function(){n.apply(e.storedValue)})):n.apply(this.storedValue))},Object.defineProperty(C.prototype,"snapshot",{get:function(){return this.getSnapshot()},enumerable:!0,configurable:!0}),C.prototype.getSnapshot=function(){return this.isAlive?2===this._observableInstanceState?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath},C.prototype._getActualSnapshot=function(){return this.type.getSnapshot(this)},C.prototype._getCachedInitialSnapshot=function(){var t,e,n;return this._cachedInitialSnapshotCreated||(t=this.type,e=this._childNodes,n=this._initialSnapshot,this._cachedInitialSnapshot=t.processInitialSnapshot(e,n),this._cachedInitialSnapshotCreated=!0),this._cachedInitialSnapshot},C.prototype.isRunningAction=function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()},C.prototype.assertAlive=function(t){var e="warn";if(!this.isAlive){this._getAssertAliveError(t);e}},C.prototype._getAssertAliveError=function(t){var e=this.getEscapedPath(!1)||this.pathUponDeath||"",n=t.subpath&&kt(t.subpath)||"",i=t.actionContext||U;i&&"action"!==i.type&&i.parentActionEvent&&(i=i.parentActionEvent);var r,o="";return i&&null!=i.name&&(o=(i&&i.context&&(ut(r=i.context,1),ct(r).path)||e)+"."+i.name+"()"),"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+e+"', Subpath: '"+n+"', Action: '"+o+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."},C.prototype.getChildNode=function(t){this.assertAlive({subpath:t}),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildNode(this,t):this._childNodes[t]}finally{this._autoUnbox=!0}},C.prototype.getChildren=function(){this.assertAlive(yt),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildren(this):ft(this._childNodes)}finally{this._autoUnbox=!0}},C.prototype.getChildType=function(t){return this.type.getChildType(t)},Object.defineProperty(C.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!0,configurable:!0}),C.prototype.assertWritable=function(t){if(this.assertAlive(t),!this.isRunningAction()&&this.isProtected)throw bt("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")},C.prototype.removeChild=function(t){this.type.removeChild(this,t)},C.prototype.unbox=function(t){return t?(this.assertAlive({subpath:t.subpath||t.subpathUponDeath}),this._autoUnbox?t.value:t):t},C.prototype.toString=function(){var t=(this.isAlive?this.path:this.pathUponDeath)||"<root>",e=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+t+e+(this.isAlive?"":" [dead]")},C.prototype.finalizeCreation=function(){var t=this;this.baseFinalizeCreation((function(){var e,n;try{for(var i=h(t.getChildren()),o=i.next();!o.done;o=i.next())o.value.finalizeCreation()}catch(n){e={error:n}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}t.fireInternalHook(r.afterCreationFinalization)}))},C.prototype.detach=function(){if(!this.isAlive)throw bt("Error while detaching, node is not alive.");this.clearParent()},C.prototype.preboot=function(){var t=this;this._applyPatches=Y(this.storedValue,"@APPLY_PATCHES",(function(e){e.forEach((function(e){var n=function(t){var e=t.split("/").map(zt);if(!(""===t||"."===t||".."===t||Vt(t,"/")||Vt(t,"./")||Vt(t,"../")))throw bt("a json path must be either rooted, empty or relative, but got '"+t+"'");return""===e[0]&&e.shift(),e}(e.path);(function(t,e,n){void 0===n&&(n=!0);for(var i=t,r=0;r<e.length;r++){var o=e[r];if(".."===o){if(i=i.parent)continue}else{if("."===o)continue;if(i){if(i instanceof w)try{var a=i.value;pt(a)&&(i=ct(a))}catch(t){if(!n)return;throw t}if(i instanceof j&&i.getChildType(o)&&(i=i.getChildNode(o)))continue}}if(n)throw bt("Could not resolve '"+o+"' in path '"+(Rt(e.slice(0,r))||"/")+"' while resolving '"+Rt(e)+"'");return}return i})(t,n.slice(0,-1)).applyPatchLocally(n[n.length-1],e)}))})),this._applySnapshot=Y(this.storedValue,"@APPLY_SNAPSHOT",(function(e){if(e!==t.snapshot)return t.type.applySnapshot(t,e)})),It(this.storedValue,"$treenode",this),It(this.storedValue,"toJSON",lt)},C.prototype.die=function(){this.isAlive&&this.state!==et.DETACHING&&(this.aboutToDie(),this.finalizeDeath())},C.prototype.aboutToDie=function(){0!==this._observableInstanceState&&(this.getChildren().forEach((function(t){t.aboutToDie()})),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))},C.prototype.finalizeDeath=function(){this.getChildren().forEach((function(t){t.finalizeDeath()})),this.root.identifierCache.notifyDied(this);var t=this.snapshot;this._snapshotUponDeath=t,this._internalEventsClearAll(),this.baseFinalizeDeath()},C.prototype.onSnapshot=function(t){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",t)},C.prototype.emitSnapshot=function(t){this._internalEventsEmit("snapshot",t)},C.prototype.onPatch=function(t){return this._internalEventsRegister("patch",t)},C.prototype.emitPatch=function(t,e){var n,i,r;this._internalEventsHasSubscribers("patch")&&(i=(n=l(function(t){if(!("oldValue"in t))throw bt("Patches without `oldValue` field cannot be inversed");return[function(t){switch(t.op){case"add":return{op:"add",path:t.path,value:t.value};case"remove":return{op:"remove",path:t.path};case"replace":return{op:"replace",path:t.path,value:t.value}}}(t),function(t){switch(t.op){case"add":return{op:"remove",path:t.path};case"remove":return{op:"add",path:t.path,value:t.oldValue};case"replace":return{op:"replace",path:t.path,value:t.oldValue}}}(t)]}(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i++){var r=e[i];for(var o in r)t[o]=r[o]}return t}({},t,{path:e.path.substr(this.path.length)+"/"+t.path})),2))[0],r=n[1],this._internalEventsEmit("patch",i,r)),this.parent&&this.parent.emitPatch(t,e)},C.prototype.hasDisposer=function(t){return this._internalEventsHas("dispose",t)},C.prototype.addDisposer=function(t){if(this.hasDisposer(t))throw bt("cannot add a disposer when it is already registered for execution");this._internalEventsRegister("dispose",t,!0)},C.prototype.removeDisposer=function(t){if(!this._internalEventsHas("dispose",t))throw bt("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",t)},C.prototype.removeMiddleware=function(t){var e;!this.middlewares||0<=(e=this.middlewares.indexOf(t))&&this.middlewares.splice(e,1)},C.prototype.addMiddleWare=function(t,e){var n=this;void 0===e&&(e=!0);var i={handler:t,includeHooks:e};return this.middlewares?this.middlewares.push(i):this.middlewares=[i],function(){n.removeMiddleware(i)}},C.prototype.applyPatchLocally=function(t,e){this.assertWritable({subpath:t}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,t,e)},C.prototype._addSnapshotReaction=function(){var t,e=this;this._hasSnapshotReaction||(t=Object(a.y)((function(){return e.snapshot}),(function(t){return e.emitSnapshot(t)}),O),this.addDisposer(t),this._hasSnapshotReaction=!0)},C.prototype._internalEventsHasSubscribers=function(t){return!!this._internalEvents&&this._internalEvents.hasSubscribers(t)},C.prototype._internalEventsRegister=function(t,e,n){return void 0===n&&(n=!1),this._internalEvents||(this._internalEvents=new Ct),this._internalEvents.register(t,e,n)},C.prototype._internalEventsHas=function(t,e){return!!this._internalEvents&&this._internalEvents.has(t,e)},C.prototype._internalEventsUnregister=function(t,e){this._internalEvents&&this._internalEvents.unregister(t,e)},C.prototype._internalEventsEmit=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this._internalEvents&&(e=this._internalEvents).emit.apply(e,f([t],n))},C.prototype._internalEventsClear=function(t){this._internalEvents&&this._internalEvents.clear(t)},C.prototype._internalEventsClearAll=function(){this._internalEvents&&this._internalEvents.clearAll()},c([a.j],C.prototype,"createObservableInstanceIfNeeded",null),c([a.k],C.prototype,"snapshot",null),c([a.j],C.prototype,"detach",null),c([a.j],C.prototype,"die",null),C);function C(t,e,n,i,r){var o=S.call(this,t,e,n,i)||this;if(o.nodeId=++I,o.isProtectionEnabled=!0,o._autoUnbox=!0,o._isRunningAction=!1,o._hasSnapshotReaction=!1,o._observableInstanceState=0,o._cachedInitialSnapshotCreated=!1,o.unbox=o.unbox.bind(o),o._initialSnapshot=r,o.identifierAttribute=t.identifierAttribute,e||(o.identifierCache=new rt),o._childNodes=t.initializeChildNodes(o,o._initialSnapshot),o.identifier=null,o.unnormalizedIdentifier=null,o.identifierAttribute&&o._initialSnapshot){var a,s=o._initialSnapshot[o.identifierAttribute];if(void 0!==s||(a=o._childNodes[o.identifierAttribute])&&(s=a.value),"string"!=typeof s&&"number"!=typeof s)throw bt("Instance identifier '"+o.identifierAttribute+"' for type '"+o.type.name+"' must be a string or a number");o.identifier=""+s,o.unnormalizedIdentifier=s}return e?e.root.identifierCache.addNodeToCache(o):o.identifierCache.addNodeToCache(o),o}(A=P=P||{})[A.String=1]="String",A[A.Number=2]="Number",A[A.Boolean=4]="Boolean",A[A.Date=8]="Date",A[A.Literal=16]="Literal",A[A.Array=32]="Array",A[A.Map=64]="Map",A[A.Object=128]="Object",A[A.Frozen=256]="Frozen",A[A.Optional=512]="Optional",A[A.Reference=1024]="Reference",A[A.Identifier=2048]="Identifier",A[A.Late=4096]="Late",A[A.Refinement=8192]="Refinement",A[A.Union=16384]="Union",A[A.Null=32768]="Null",A[A.Undefined=65536]="Undefined",A[A.Integer=131072]="Integer",A[A.Custom=262144]="Custom",A[A.SnapshotProcessor=524288]="SnapshotProcessor";var T="cannotDetermine",E=(V.prototype.create=function(t,e){return tt(this,t),this.instantiate(null,"",e,t).value},V.prototype.getSnapshot=function(t,e){throw bt("unimplemented method")},V.prototype.isAssignableFrom=function(t){return t===this},V.prototype.validate=function(t,e){if(ht(t)){var n=d(t);return this.isAssignableFrom(n)?dt:Q(e,t)}return this.isValidSnapshot(t,e)},V.prototype.is=function(t){return 0===this.validate(t,[{path:"",type:this}]).length},Object.defineProperty(V.prototype,"Type",{get:function(){throw bt("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"TypeWithoutSTN",{get:function(){throw bt("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"SnapshotType",{get:function(){throw bt("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!0,configurable:!0}),Object.defineProperty(V.prototype,"CreationType",{get:function(){throw bt("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!0,configurable:!0}),c([a.j],V.prototype,"create",null),V);function V(t){this.isType=!0,this.name=t}var N,D=(p(x,N=E),x.prototype.create=function(t,e){return void 0===t&&(t=this.getDefaultSnapshot()),N.prototype.create.call(this,t,e)},x.prototype.getValue=function(t){return t.createObservableInstanceIfNeeded(),t.storedValue},x.prototype.tryToReconcileNode=function(t,e){return!(t.isDetaching||t.snapshot!==e&&(!pt(e)||ct(e)!==t)&&(t.type!==this||!Pt(e)||pt(e)||t.identifierAttribute&&t.identifier!==""+e[t.identifierAttribute]||(t.applySnapshot(e),0)))},x.prototype.reconcile=function(t,e,n,i){if(this.tryToReconcileNode(t,e))return t.setParent(n,i),t;if(t.die(),pt(e)&&this.isAssignableFrom(d(e))){var r=ct(e);return r.setParent(n,i),r}return this.instantiate(n,i,void 0,e)},x.prototype.getSubTypes=function(){return null},c([a.j],x.prototype,"create",null),x);function x(t){return N.call(this,t)||this}var k,z=(p(R,k=E),R.prototype.createNewInstance=function(t){return t},R.prototype.getValue=function(t){return t.storedValue},R.prototype.getSnapshot=function(t){return t.storedValue},R.prototype.reconcile=function(t,e,n,i){if(!t.isDetaching&&t.type===this&&t.storedValue===e)return t;var r=this.instantiate(n,i,void 0,e);return t.die(),r},R.prototype.getSubTypes=function(){return null},R);function R(){return null!==k&&k.apply(this,arguments)||this}function H(t){return"object"==typeof t&&t&&!0===t.isType}function F(t,e){Nt()}function M(t,e){this.hooks=t,this.call=e,this.flowsPending=0,this.running=!0,t&&t.onStart(e)}new Map,M.prototype.finish=function(t){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,t))},M.prototype.incFlowsPending=function(){this.flowsPending++},M.prototype.decFlowsPending=function(){this.flowsPending--},Object.defineProperty(M.prototype,"hasFlowsPending",{get:function(){return 0<this.flowsPending},enumerable:!0,configurable:!0});var U,L=1;function W(){return L++}function K(t,e){var n=ct(t.context);"action"===t.type&&n.assertAlive({actionContext:t});var i=n._isRunningAction;n._isRunningAction=!0;var o=U;U=t;try{return function(t,e,n){var i=new Z(t,n);if(i.isEmpty)return Object(a.j)(n).apply(null,e.args);var o=null;return function t(e){var s=i.getNextMiddleware(),p=s&&s.handler;return p?!s.includeHooks&&r[e.name]?t(e):(p(e,(function(e,n){o=t(e),n&&(o=n(o))}),(function(t){o=t})),o):Object(a.j)(n).apply(null,e.args)}(e)}(n,t,e)}finally{U=o,n._isRunningAction=i}}function G(t){if(t)return"action"===t.type?t:t.parentActionEvent}function Y(t,e,n){function i(){var i,r=W(),o=U,a=G(o);return K({type:"action",name:e,id:r,args:Et(arguments),context:t,tree:(ut(i=t,1),ct(i).root.storedValue),rootId:o?o.rootId:r,parentId:o?o.id:0,allParentIds:o?f(o.allParentIds,[o.id]):[],parentEvent:o,parentActionEvent:a},n)}return i._isMSTAction=!0,i}var Z=(Object.defineProperty($.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!0,configurable:!0}),$.prototype.getNextMiddleware=function(){var t=this.middlewares[this.arrayIndex];if(t)return t[this.inArrayIndex++]||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())},$);function $(t,e){this.arrayIndex=0,this.inArrayIndex=0,this.middlewares=[],e.$mst_middleware&&this.middlewares.push(e.$mst_middleware);for(var n=t;n;)n.middlewares&&this.middlewares.push(n.middlewares),n=n.parent}function B(t){return"function"==typeof t?"<function"+(t.name?" "+t.name:"")+">":pt(t)?"<"+t+">":"`"+function(t){try{return JSON.stringify(t)}catch(t){return"<Unserializable: "+t+">"}}(t)+"`"}function J(t){var e,n=t.value,i=t.context[t.context.length-1].type,r=t.context.map((function(t){return t.path})).filter((function(t){return 0<t.length})).join("/"),o=0<r.length?'at path "/'+r+'" ':"",a=pt(n)?"value of type "+ct(n).type.name+":":At(n)?"value":"snapshot",s=i&&pt(n)&&i.is(ct(n).snapshot);return o+a+" "+B(n)+" is not assignable "+(i?"to type: `"+i.name+"`":"")+(t.message?" ("+t.message+")":"")+(i?H(e=i)&&0<(e.flags&(P.String|P.Number|P.Integer|P.Boolean|P.Date))||At(n)?".":", expected an instance of `"+i.name+"` or a snapshot like `"+i.describe()+"` instead."+(s?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function q(t,e,n){return t.concat([{path:e,type:n}])}function Q(t,e,n){return[{context:t,value:e,message:n}]}function X(t){return t.reduce((function(t,e){return t.concat(e)}),[])}function tt(e,n){void 0!==t&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0})&&"true"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).ENABLE_TYPE_CHECK&&function(t,e){var n=t.validate(e,[{path:"",type:t}]);if(0<n.length)throw bt(function(t,e,n){return 0!==n.length?"Error while converting "+function(t){return t.length<280?t:t.substring(0,272)+"......"+t.substring(t.length-8)}(B(e))+" to `"+t.name+"`:\n\n    "+n.map(J).join("\n    "):void 0}(t,e,n))}(e,n)}var et,nt,it=0,rt=(ot.prototype.updateLastCacheModificationPerId=function(t){var e=this.lastCacheModificationPerId.get(t);this.lastCacheModificationPerId.set(t,void 0===e?1:e+1)},ot.prototype.getLastCacheModificationPerId=function(t){var e=this.lastCacheModificationPerId.get(t)||0;return this.cacheId+"-"+e},ot.prototype.addNodeToCache=function(t,e){if(void 0===e&&(e=!0),t.identifierAttribute){var n=t.identifier;this.cache.has(n)||this.cache.set(n,a.w.array([],vt));var i=this.cache.get(n);if(-1!==i.indexOf(t))throw bt("Already registered");i.push(t),e&&this.updateLastCacheModificationPerId(n)}},ot.prototype.mergeCache=function(t){var e=this;Object(a.E)(t.identifierCache.cache).forEach((function(t){return t.forEach((function(t){e.addNodeToCache(t)}))}))},ot.prototype.notifyDied=function(t){var e,n;t.identifierAttribute&&(e=t.identifier,(n=this.cache.get(e))&&(n.remove(t),n.length||this.cache.delete(e),this.updateLastCacheModificationPerId(t.identifier)))},ot.prototype.splitCache=function(t){var e=this,n=new ot,i=t.path;return Object(a.n)(this.cache).forEach((function(t){for(var r=l(t,2),o=r[0],a=r[1],s=!1,p=a.length-1;0<=p;p--)0===a[p].path.indexOf(i)&&(n.addNodeToCache(a[p],!1),a.splice(p,1),s=!0);s&&e.updateLastCacheModificationPerId(o)})),n},ot.prototype.has=function(t,e){var n=this.cache.get(e);return!!n&&n.some((function(e){return t.isAssignableFrom(e.type)}))},ot.prototype.resolve=function(t,e){var n=this.cache.get(e);if(!n)return null;var i=n.filter((function(e){return t.isAssignableFrom(e.type)}));switch(i.length){case 0:return null;case 1:return i[0];default:throw bt("Cannot resolve a reference to type '"+t.name+"' with id: '"+e+"' unambigously, there are multiple candidates: "+i.map((function(t){return t.path})).join(", "))}},ot);function ot(){this.cacheId=it++,this.cache=a.w.map(),this.lastCacheModificationPerId=a.w.map()}function at(t,e,n,i,r){var o=ht(r);if(o){if(o.parent)throw bt("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(e?e.path:"")+"/"+n+"', but it lives already at '"+o.path+"'");return e&&o.setParent(e,n),o}return new j(t,e,n,i,r)}function st(t,e,n,i,r){return new w(t,e,n,i,r)}function pt(t){return!(!t||!t.$treenode)}function ut(t,e){Nt()}function ct(t){if(!pt(t))throw bt("Value "+t+" is no MST Node");return t.$treenode}function ht(t){return t&&t.$treenode||null}function lt(){return ct(this).snapshot}function ft(t){if(!t)return dt;var e=Object.keys(t);if(!e.length)return dt;var n=new Array(e.length);return e.forEach((function(e,i){n[i]=t[e]})),n}(nt=et=et||{})[nt.INITIALIZING=0]="INITIALIZING",nt[nt.CREATED=1]="CREATED",nt[nt.FINALIZED=2]="FINALIZED",nt[nt.DETACHING=3]="DETACHING",nt[nt.DEAD=4]="DEAD";var dt=Object.freeze([]),yt=Object.freeze({}),vt="string"==typeof a.a?{deep:!1}:{deep:!1,proxy:!1};function bt(t){return void 0===t&&(t="Illegal state"),new Error("[mobx-state-tree] "+t)}function gt(t){return t}Object.freeze(vt);var mt=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function wt(t){return Array.isArray(t)||Object(a.s)(t)}function _t(t){return t?wt(t)?t:[t]:dt}function St(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function Pt(t){return!(null===t||"object"!=typeof t||t instanceof Date||t instanceof RegExp)}function At(t,e){return void 0===e&&(e=!0),null==t||!!("string"==typeof t||"number"==typeof t||"boolean"==typeof t||e&&t instanceof Date)}function It(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}var Ot=(Object.defineProperty(jt.prototype,"hasSubscribers",{get:function(){return 0<this.handlers.length},enumerable:!0,configurable:!0}),jt.prototype.register=function(t,e){var n=this;return void 0===e&&(e=!1),e?this.handlers.unshift(t):this.handlers.push(t),function(){n.unregister(t)}},jt.prototype.has=function(t){return 0<=this.handlers.indexOf(t)},jt.prototype.unregister=function(t){var e=this.handlers.indexOf(t);0<=e&&this.handlers.splice(e,1)},jt.prototype.clear=function(){this.handlers.length=0},jt.prototype.emit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.handlers.slice().forEach((function(e){return e.apply(void 0,f(t))}))},jt);function jt(){this.handlers=[]}var Ct=(Tt.prototype.hasSubscribers=function(t){var e=this.eventHandlers&&this.eventHandlers[t];return!!e&&e.hasSubscribers},Tt.prototype.register=function(t,e,n){return void 0===n&&(n=!1),this.eventHandlers||(this.eventHandlers={}),(this.eventHandlers[t]||(this.eventHandlers[t]=new Ot)).register(e,n)},Tt.prototype.has=function(t,e){var n=this.eventHandlers&&this.eventHandlers[t];return!!n&&n.has(e)},Tt.prototype.unregister=function(t,e){var n=this.eventHandlers&&this.eventHandlers[t];n&&n.unregister(e)},Tt.prototype.clear=function(t){this.eventHandlers&&delete this.eventHandlers[t]},Tt.prototype.clearAll=function(){this.eventHandlers=void 0},Tt.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.eventHandlers&&this.eventHandlers[t];i&&i.emit.apply(i,f(e))},Tt);function Tt(){}function Et(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}function Vt(t,e){return 0===t.indexOf(e)}function Nt(){}function Dt(){}function xt(t,e,n){void 0===n&&(n=!0)}function kt(t){return"number"==typeof t==1?""+t:-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function zt(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Rt(t){if(0===t.length)return"";function e(t){return t.map(kt).join("/")}return"."===t[0]||".."===t[0]?e(t):"/"+e(t)}var Ht,Ft=(p(Mt,Ht=E),Object.defineProperty(Mt.prototype,"flags",{get:function(){return this._subtype.flags|P.SnapshotProcessor},enumerable:!0,configurable:!0}),Mt.prototype.describe=function(){return"snapshotProcessor("+this._subtype.describe()+")"},Mt.prototype.preProcessSnapshot=function(t){return this._processors.preProcessor?this._processors.preProcessor.call(null,t):t},Mt.prototype.postProcessSnapshot=function(t){return this._processors.postProcessor?this._processors.postProcessor.call(null,t):t},Mt.prototype._fixNode=function(t){var e=this;!function(t,e){for(var n,i,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];try{for(var a=h(r),s=a.next();!s.done;s=a.next()){var p=s.value;t[p]=e[p].bind(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}(t.type,this,"isAssignableFrom","create");var n=t.getSnapshot;t.getSnapshot=function(){return e.postProcessSnapshot(n.call(t))}},Mt.prototype.instantiate=function(t,e,n,i){var r=pt(i)?i:this.preProcessSnapshot(i),o=this._subtype.instantiate(t,e,n,r);return this._fixNode(o),o},Mt.prototype.reconcile=function(t,e,n,i){var r=this._subtype.reconcile(t,pt(e)?e:this.preProcessSnapshot(e),n,i);return r!==t&&this._fixNode(r),r},Mt.prototype.getSnapshot=function(t,e){void 0===e&&(e=!0);var n=this._subtype.getSnapshot(t);return e?this.postProcessSnapshot(n):n},Mt.prototype.isValidSnapshot=function(t,e){var n=this.preProcessSnapshot(t);return this._subtype.validate(n,e)},Mt.prototype.getSubTypes=function(){return this._subtype},Mt.prototype.is=function(t){return 0===this._subtype.validate(H(t)?this._subtype:this.preProcessSnapshot(t),[{path:"",type:this._subtype}]).length},Mt);function Mt(t,e,n){var i=Ht.call(this,n||t.name)||this;return i._subtype=t,i._processors=e,i}var Ut,Lt,Wt="Map.put can only be used to store complex values that have an identifier type attribute";(Lt=Ut=Ut||{})[Lt.UNKNOWN=0]="UNKNOWN",Lt[Lt.YES=1]="YES",Lt[Lt.NO=2]="NO";var Kt,Gt=(p(Yt,Kt=a.b),Yt.prototype.get=function(t){return Kt.prototype.get.call(this,""+t)},Yt.prototype.has=function(t){return Kt.prototype.has.call(this,""+t)},Yt.prototype.delete=function(t){return Kt.prototype.delete.call(this,""+t)},Yt.prototype.set=function(t,e){return Kt.prototype.set.call(this,""+t,e)},Yt.prototype.put=function(t){if(!t)throw bt("Map.put cannot be used to set empty values");if(pt(t)){var e=ct(t);if(null===e.identifier)throw bt(Wt);return this.set(e.identifier,t),t}if(Pt(t)){var n=ct(this),i=n.type;if(i.identifierMode!==Ut.YES)throw bt(Wt);var r=t[i.mapIdentifierAttribute];if(!mn(r)){var o=this.put(i.getChildType().create(t,n.environment));return this.put(function(t,e){void 0===e&&(e=!0),ut();var n=ct(t);return e?n.snapshot:n.type.getSnapshot(n,!1)}(o))}var a=""+r;return this.set(a,t),this.get(a)}throw bt("Map.put can only be used to store complex values")},Yt);function Yt(t){return Kt.call(this,t,a.w.ref.enhancer)||this}var Zt,$t=(p(Bt,Zt=D),Bt.prototype.hooks=function(t){var e=0<this.hookInitializers.length?this.hookInitializers.concat(t):[t];return new Bt(this.name,this._subType,e)},Bt.prototype.instantiate=function(t,e,n,i){return this._determineIdentifierMode(),at(this,t,e,n,i)},Bt.prototype._determineIdentifierMode=function(){var t,e;this.identifierMode===Ut.UNKNOWN&&(t=[],function t(e,n){var i,r,o=e.getSubTypes();if(o!==T){if(o){var a=_t(o);try{for(var s=h(a),p=s.next();!p.done;p=s.next())if(!t(p.value,n))return}catch(t){i={error:t}}finally{try{p&&!p.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}}return e instanceof se&&n.push(e),1}}(this._subType,t)&&(e=void 0,t.forEach((function(t){if(t.identifierAttribute){if(e&&e!==t.identifierAttribute)throw bt("The objects in a map should all have the same identifier attribute, expected '"+e+"', but child of type '"+t.name+"' declared attribute '"+t.identifierAttribute+"' as identifier");e=t.identifierAttribute}})),e?(this.identifierMode=Ut.YES,this.mapIdentifierAttribute=e):this.identifierMode=Ut.NO))},Bt.prototype.initializeChildNodes=function(t,e){void 0===e&&(e={});var n=t.type._subType,i={};return Object.keys(e).forEach((function(r){i[r]=n.instantiate(t,r,void 0,e[r])})),i},Bt.prototype.createNewInstance=function(t){return new Gt(t)},Bt.prototype.finalizeNewInstance=function(t,e){Object(a.i)(e,t.unbox),t.type.hookInitializers.forEach((function(t){var n=t(e);Object.keys(n).forEach((function(t){var i=n[t],r=Y(e,t,i);It(e,t,r)}))})),Object(a.q)(e,this.willChange),Object(a.x)(e,this.didChange)},Bt.prototype.describe=function(){return"Map<string, "+this._subType.describe()+">"},Bt.prototype.getChildren=function(t){return Object(a.E)(t.storedValue)},Bt.prototype.getChildNode=function(t,e){var n=t.storedValue.get(""+e);if(!n)throw bt("Not a child "+e);return n},Bt.prototype.willChange=function(t){var e=ct(t.object),n=t.name;e.assertWritable({subpath:n});var i=e.type,r=i._subType;switch(t.type){case"update":var o=t.newValue;if(o===t.object.get(n))return null;tt(r,o),t.newValue=r.reconcile(e.getChildNode(n),t.newValue,e,n),i.processIdentifier(n,t.newValue);break;case"add":tt(r,t.newValue),t.newValue=r.instantiate(e,n,void 0,t.newValue),i.processIdentifier(n,t.newValue)}return t},Bt.prototype.processIdentifier=function(t,e){if(this.identifierMode===Ut.YES&&e instanceof j){var n=e.identifier;if(n!==t)throw bt("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+n+"', but expected: '"+t+"'")}},Bt.prototype.getSnapshot=function(t){var e={};return t.getChildren().forEach((function(t){e[t.subpath]=t.snapshot})),e},Bt.prototype.processInitialSnapshot=function(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n].getSnapshot()})),e},Bt.prototype.didChange=function(t){var e=ct(t.object);switch(t.type){case"update":return void e.emitPatch({op:"replace",path:kt(t.name),value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},e);case"add":return void e.emitPatch({op:"add",path:kt(t.name),value:t.newValue.snapshot,oldValue:void 0},e);case"delete":var n=t.oldValue.snapshot;return t.oldValue.die(),void e.emitPatch({op:"remove",path:kt(t.name),oldValue:n},e)}},Bt.prototype.applyPatchLocally=function(t,e,n){var i=t.storedValue;switch(n.op){case"add":case"replace":i.set(e,n.value);break;case"remove":i.delete(e)}},Bt.prototype.applySnapshot=function(t,e){tt(this,e);var n=t.storedValue,i={};if(Array.from(n.keys()).forEach((function(t){i[t]=!1})),e)for(var r in e)n.set(r,e[r]),i[""+r]=!0;Object.keys(i).forEach((function(t){!1===i[t]&&n.delete(t)}))},Bt.prototype.getChildType=function(){return this._subType},Bt.prototype.isValidSnapshot=function(t,e){var n=this;return St(t)?X(Object.keys(t).map((function(i){return n._subType.validate(t[i],q(e,i,n._subType))}))):Q(e,t,"Value is not a plain object")},Bt.prototype.getDefaultSnapshot=function(){return yt},Bt.prototype.removeChild=function(t,e){t.storedValue.delete(e)},c([a.j],Bt.prototype,"applySnapshot",null),Bt);function Bt(t,e,n){void 0===n&&(n=[]);var i=Zt.call(this,t)||this;return i._subType=e,i.identifierMode=Ut.UNKNOWN,i.mapIdentifierAttribute=void 0,i.flags=P.Map,i.hookInitializers=[],i._determineIdentifierMode(),i.hookInitializers=n,i}var Jt,qt=(p(Qt,Jt=D),Qt.prototype.hooks=function(t){var e=0<this.hookInitializers.length?this.hookInitializers.concat(t):[t];return new Qt(this.name,this._subType,e)},Qt.prototype.instantiate=function(t,e,n,i){return at(this,t,e,n,i)},Qt.prototype.initializeChildNodes=function(t,e){void 0===e&&(e=[]);var n=t.type._subType,i={};return e.forEach((function(e,r){var o=""+r;i[o]=n.instantiate(t,o,void 0,e)})),i},Qt.prototype.createNewInstance=function(t){return a.w.array(ft(t),vt)},Qt.prototype.finalizeNewInstance=function(t,e){Object(a.h)(e).dehancer=t.unbox,t.type.hookInitializers.forEach((function(t){var n=t(e);Object.keys(n).forEach((function(t){var i=n[t],r=Y(e,t,i);It(e,t,r)}))})),Object(a.q)(e,this.willChange),Object(a.x)(e,this.didChange)},Qt.prototype.describe=function(){return this._subType.describe()+"[]"},Qt.prototype.getChildren=function(t){return t.storedValue.slice()},Qt.prototype.getChildNode=function(t,e){var n=Number(e);if(n<t.storedValue.length)return t.storedValue[n];throw bt("Not a child: "+e)},Qt.prototype.willChange=function(t){var e=ct(t.object);e.assertWritable({subpath:""+t.index});var n=e.type._subType,i=e.getChildren();switch(t.type){case"update":if(t.newValue===t.object[t.index])return null;var r=Xt(e,n,[i[t.index]],[t.newValue],[t.index]);if(!r)return null;t.newValue=r[0];break;case"splice":var o=t.index,a=t.removedCount,s=t.added,p=Xt(e,n,i.slice(o,o+a),s,s.map((function(t,e){return o+e})));if(!p)return null;t.added=p;for(var u=o+a;u<i.length;u++)i[u].setParent(e,""+(u+s.length-a))}return t},Qt.prototype.getSnapshot=function(t){return t.getChildren().map((function(t){return t.snapshot}))},Qt.prototype.processInitialSnapshot=function(t){var e=[];return Object.keys(t).forEach((function(n){e.push(t[n].getSnapshot())})),e},Qt.prototype.didChange=function(t){var e=ct(t.object);switch(t.type){case"update":return void e.emitPatch({op:"replace",path:""+t.index,value:t.newValue.snapshot,oldValue:t.oldValue?t.oldValue.snapshot:void 0},e);case"splice":for(var n=t.removedCount-1;0<=n;n--)e.emitPatch({op:"remove",path:""+(t.index+n),oldValue:t.removed[n].snapshot},e);for(n=0;n<t.addedCount;n++)e.emitPatch({op:"add",path:""+(t.index+n),value:e.getChildNode(""+(t.index+n)).snapshot,oldValue:void 0},e);return}},Qt.prototype.applyPatchLocally=function(t,e,n){var i=t.storedValue,r="-"===e?i.length:Number(e);switch(n.op){case"replace":i[r]=n.value;break;case"add":i.splice(r,0,n.value);break;case"remove":i.splice(r,1)}},Qt.prototype.applySnapshot=function(t,e){tt(this,e),t.storedValue.replace(e)},Qt.prototype.getChildType=function(){return this._subType},Qt.prototype.isValidSnapshot=function(t,e){var n=this;return wt(t)?X(t.map((function(t,i){return n._subType.validate(t,q(e,""+i,n._subType))}))):Q(e,t,"Value is not an array")},Qt.prototype.getDefaultSnapshot=function(){return dt},Qt.prototype.removeChild=function(t,e){t.storedValue.splice(Number(e),1)},c([a.j],Qt.prototype,"applySnapshot",null),Qt);function Qt(t,e,n){void 0===n&&(n=[]);var i=Jt.call(this,t)||this;return i._subType=e,i.flags=P.Array,i.hookInitializers=[],i.hookInitializers=n,i}function Xt(t,e,n,i,r){for(var o,a=!0,s=0;;s++){var p=s<=i.length-1,u=n[s],c=p?i[s]:void 0,h=""+r[s];if(((o=c)instanceof w||o instanceof j)&&(c=c.storedValue),!u&&!p)break;if(p)if(u)if(ee(u,c))n[s]=te(e,t,h,c,u);else{for(var l=void 0,f=s;f<n.length;f++)if(ee(n[f],c)){l=n.splice(f,1)[0];break}a=!1,d=te(e,t,h,c,l),n.splice(s,0,d)}else{if(pt(c)&&ct(c).parent===t)throw bt("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+t.path+"/"+h+"', but it lives already at '"+ct(c).path+"'");a=!1;var d=te(e,t,h,c);n.splice(s,0,d)}else a=!1,n.splice(s,1),u instanceof j&&u.createObservableInstanceIfNeeded(),u.die(),s--}return a?null:n}function te(t,e,n,i,r){tt(t,i);var o=function(){if(pt(i)){var o=ct(i);if(o.assertAlive(yt),null!==o.parent&&o.parent===e)return o.setParent(e,n),o}return r?t.reconcile(r,i,e,n):t.instantiate(e,n,void 0,i)}();return r&&r!==o&&(r instanceof j&&r.createObservableInstanceIfNeeded(),r.die()),o}function ee(t,e){if(t.isAlive){if(pt(e)){var n=ct(e);return n.isAlive&&n===t}return t.snapshot===e||t instanceof j&&null!==t.identifier&&t.identifierAttribute&&St(e)&&t.identifier===""+e[t.identifierAttribute]&&t.type.is(e)}}var ne="preProcessSnapshot",ie="postProcessSnapshot";function re(){return ct(this).toString()}var oe={name:"AnonymousModel",properties:{},initializers:dt};var ae,se=(p(pe,ae=D),pe.prototype._getIdentifierAttribute=function(){var t=void 0;return this.forAllProps((function(e,n){if(n.flags&P.Identifier){if(t)throw bt("Cannot define property '"+e+"' as object identifier, property '"+t+"' is already defined as identifier property");t=e}})),t},pe.prototype.cloneAndEnhance=function(t){return new pe({name:t.name||this.name,properties:Object.assign({},this.properties,t.properties),initializers:this.initializers.concat(t.initializers||[]),preProcessor:t.preProcessor||this.preProcessor,postProcessor:t.postProcessor||this.postProcessor})},pe.prototype.actions=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){return e.instantiateActions(n,t(n)),n}]})},pe.prototype.instantiateActions=function(t,e){if(!St(e))throw bt("actions initializer should return a plain object containing actions");Object.keys(e).forEach((function(n){if(n===ne)throw bt("Cannot define action '"+ne+"', it should be defined using 'type.preProcessSnapshot(fn)' instead");if(n===ie)throw bt("Cannot define action '"+ie+"', it should be defined using 'type.postProcessSnapshot(fn)' instead");var i,o=e[n],a=t[n];n in r&&a&&(i=o,o=function(){a.apply(null,arguments),i.apply(null,arguments)});var s=o.$mst_middleware,p=o.bind(e);p.$mst_middleware=s;var u=Y(t,n,p);e[n]=u,It(t,n,u)}))},pe.prototype.volatile=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){return e.instantiateVolatileState(n,t(n)),n}]})},pe.prototype.instantiateVolatileState=function(t,e){if(!St(e))throw bt("volatile state initializer should return a plain object containing state");Object(a.A)(t,e)},pe.prototype.extend=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){var i=t(n),r=i.actions,o=i.views,a=i.state,s=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(i,["actions","views","state"]);for(var p in s)throw bt("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+p+"'");return a&&e.instantiateVolatileState(n,a),o&&e.instantiateViews(n,o),r&&e.instantiateActions(n,r),n}]})},pe.prototype.views=function(t){var e=this;return this.cloneAndEnhance({initializers:[function(n){return e.instantiateViews(n,t(n)),n}]})},pe.prototype.instantiateViews=function(t,e){if(!St(e))throw bt("views initializer should return a plain object containing views");Object.keys(e).forEach((function(n){var i,r=Object.getOwnPropertyDescriptor(e,n);if("get"in r)Object(a.r)(t,n)?((i=Object(a.h)(t,n)).derivation=r.get,i.scope=t,r.set&&(i.setter=Object(a.j)(i.name+"-setter",r.set))):Object(a.k)(t,n,r,!0);else{if("function"!=typeof r.value)throw bt("A view member should either be a function or getter based property");It(t,n,r.value)}}))},pe.prototype.instantiate=function(t,e,n,i){return at(this,t,e,n,pt(i)?i:this.applySnapshotPreProcessor(i))},pe.prototype.initializeChildNodes=function(t,e){void 0===e&&(e={});var n=t.type,i={};return n.forAllProps((function(n,r){i[n]=r.instantiate(t,n,void 0,e[n])})),i},pe.prototype.createNewInstance=function(t){return a.w.object(t,yt,vt)},pe.prototype.finalizeNewInstance=function(t,e){It(e,"toString",re),this.forAllProps((function(n){Object(a.i)(e,n,t.unbox)})),this.initializers.reduce((function(t,e){return e(t)}),e),Object(a.q)(e,this.willChange),Object(a.x)(e,this.didChange)},pe.prototype.willChange=function(t){var e=t,n=ct(e.object),i=e.name;n.assertWritable({subpath:i});var r=n.type.properties[i];return r&&(tt(r,e.newValue),e.newValue=r.reconcile(n.getChildNode(i),e.newValue,n,i)),e},pe.prototype.didChange=function(t){var e,n=t,i=ct(n.object);i.type.properties[n.name]&&(e=n.oldValue?n.oldValue.snapshot:void 0,i.emitPatch({op:"replace",path:kt(n.name),value:n.newValue.snapshot,oldValue:e},i))},pe.prototype.getChildren=function(t){var e=this,n=[];return this.forAllProps((function(i){n.push(e.getChildNode(t,i))})),n},pe.prototype.getChildNode=function(t,e){if(!(e in this.properties))throw bt("Not a value property: "+e);var n=Object(a.h)(t.storedValue,e).value;if(!n)throw bt("Node not available for property "+e);return n},pe.prototype.getSnapshot=function(t,e){var n=this;void 0===e&&(e=!0);var i={};return this.forAllProps((function(e,r){Object(a.o)(t.storedValue,e).reportObserved(),i[e]=n.getChildNode(t,e).snapshot})),e?this.applySnapshotPostProcessor(i):i},pe.prototype.processInitialSnapshot=function(t){var e={};return Object.keys(t).forEach((function(n){e[n]=t[n].getSnapshot()})),this.applySnapshotPostProcessor(e)},pe.prototype.applyPatchLocally=function(t,e,n){if("replace"!==n.op&&"add"!==n.op)throw bt("object does not support operation "+n.op);t.storedValue[e]=n.value},pe.prototype.applySnapshot=function(t,e){var n=this.applySnapshotPreProcessor(e);tt(this,n),this.forAllProps((function(e){t.storedValue[e]=n[e]}))},pe.prototype.applySnapshotPreProcessor=function(t){var e=this.preProcessor;return e?e.call(null,t):t},pe.prototype.applySnapshotPostProcessor=function(t){var e=this.postProcessor;return e?e.call(null,t):t},pe.prototype.getChildType=function(t){return xt(),this.properties[t]},pe.prototype.isValidSnapshot=function(t,e){var n=this,i=this.applySnapshotPreProcessor(t);return St(i)?X(this.propertyNames.map((function(t){return n.properties[t].validate(i[t],q(e,t,n.properties[t]))}))):Q(e,i,"Value is not a plain object")},pe.prototype.forAllProps=function(t){var e=this;this.propertyNames.forEach((function(n){return t(n,e.properties[n])}))},pe.prototype.describe=function(){var t=this;return"{ "+this.propertyNames.map((function(e){return e+": "+t.properties[e].describe()})).join("; ")+" }"},pe.prototype.getDefaultSnapshot=function(){return yt},pe.prototype.removeChild=function(t,e){t.storedValue[e]=void 0},c([a.j],pe.prototype,"applySnapshot",null),pe);function pe(t){var e=ae.call(this,t.name||oe.name)||this;return e.flags=P.Object,e.named=function(t){return e.cloneAndEnhance({name:t})},e.props=function(t){return e.cloneAndEnhance({properties:t})},e.preProcessSnapshot=function(t){var n=e.preProcessor;return n?e.cloneAndEnhance({preProcessor:function(e){return n(t(e))}}):e.cloneAndEnhance({preProcessor:t})},e.postProcessSnapshot=function(t){var n=e.postProcessor;return n?e.cloneAndEnhance({postProcessor:function(e){return t(n(e))}}):e.cloneAndEnhance({postProcessor:t})},Object.assign(e,oe,t),e.properties=function(t){return Object.keys(t).reduce((function(t,e){var n,i,o;if(e in r)throw bt("Hook '"+e+"' was defined as property. Hooks should be defined as part of the actions");var a=Object.getOwnPropertyDescriptor(t,e);if("get"in a)throw bt("Getters are not supported as properties. Please use views instead");var s=a.value;if(null==s)throw bt("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(At(s))return Object.assign({},t,((n={})[e]=xe(function(t){switch(typeof t){case"string":return le;case"number":return fe;case"boolean":return ye;case"object":if(t instanceof Date)return we}throw bt("Cannot determine primitive type from value "+t)}(s),s),n));if(s instanceof $t)return Object.assign({},t,((i={})[e]=xe(s,{}),i));if(s instanceof qt)return Object.assign({},t,((o={})[e]=xe(s,[]),o));if(H(s))return t;throw bt("Invalid type definition for property '"+e+"', cannot infer a type from a value like '"+s+"' ("+typeof s+")")}),t)}(e.properties),e.properties,e.propertyNames=Object.keys(e.properties),e.identifierAttribute=e._getIdentifierAttribute(),e}var ue,ce=(p(he,ue=z),he.prototype.describe=function(){return this.name},he.prototype.instantiate=function(t,e,n,i){return st(this,t,e,n,i)},he.prototype.createNewInstance=function(t){return this.initializer(t)},he.prototype.isValidSnapshot=function(t,e){return At(t)&&this.checker(t)?dt:Q(e,t,"Value is not a "+("Date"===this.name?"Date or a unix milliseconds timestamp":this.name))},he);function he(t,e,n,i){void 0===i&&(i=gt);var r=ue.call(this,t)||this;return r.flags=e,r.checker=n,r.initializer=i,r.flags=e,r}var le=new ce("string",P.String,(function(t){return"string"==typeof t})),fe=new ce("number",P.Number,(function(t){return"number"==typeof t})),de=new ce("integer",P.Integer,(function(t){return mt(t)})),ye=new ce("boolean",P.Boolean,(function(t){return"boolean"==typeof t})),ve=new ce("null",P.Null,(function(t){return null===t})),be=new ce("undefined",P.Undefined,(function(t){return void 0===t})),ge=new ce("Date",P.Date,(function(t){return"number"==typeof t||t instanceof Date}),(function(t){return t instanceof Date?t:new Date(t)}));ge.getSnapshot=function(t){return t.storedValue.getTime()};var me,we=ge,_e=(p(Se,me=z),Se.prototype.instantiate=function(t,e,n,i){return st(this,t,e,n,i)},Se.prototype.describe=function(){return JSON.stringify(this.value)},Se.prototype.isValidSnapshot=function(t,e){return At(t)&&t===this.value?dt:Q(e,t,"Value is not a literal "+JSON.stringify(this.value))},Se);function Se(t){var e=me.call(this,JSON.stringify(t))||this;return e.flags=P.Literal,e.value=t,e}function Pe(t){return new _e(t)}var Ae,Ie=(p(Oe,Ae=E),Object.defineProperty(Oe.prototype,"flags",{get:function(){return this._subtype.flags|P.Refinement},enumerable:!0,configurable:!0}),Oe.prototype.describe=function(){return this.name},Oe.prototype.instantiate=function(t,e,n,i){return this._subtype.instantiate(t,e,n,i)},Oe.prototype.isAssignableFrom=function(t){return this._subtype.isAssignableFrom(t)},Oe.prototype.isValidSnapshot=function(t,e){var n=this._subtype.validate(t,e);if(0<n.length)return n;var i=pt(t)?ct(t).snapshot:t;return this._predicate(i)?dt:Q(e,t,this._message(t))},Oe.prototype.reconcile=function(t,e,n,i){return this._subtype.reconcile(t,e,n,i)},Oe.prototype.getSubTypes=function(){return this._subtype},Oe);function Oe(t,e,n,i){var r=Ae.call(this,t)||this;return r._subtype=e,r._predicate=n,r._message=i,r}var je,Ce=(p(Te,je=E),Object.defineProperty(Te.prototype,"flags",{get:function(){var t=P.Union;return this._types.forEach((function(e){t|=e.flags})),t},enumerable:!0,configurable:!0}),Te.prototype.isAssignableFrom=function(t){return this._types.some((function(e){return e.isAssignableFrom(t)}))},Te.prototype.describe=function(){return"("+this._types.map((function(t){return t.describe()})).join(" | ")+")"},Te.prototype.instantiate=function(t,e,n,i){var r=this.determineType(i,void 0);if(!r)throw bt("No matching type for union "+this.describe());return r.instantiate(t,e,n,i)},Te.prototype.reconcile=function(t,e,n,i){var r=this.determineType(e,t.type);if(!r)throw bt("No matching type for union "+this.describe());return r.reconcile(t,e,n,i)},Te.prototype.determineType=function(t,e){return this._dispatcher?this._dispatcher(t):e?e.is(t)?e:this._types.filter((function(t){return t!==e})).find((function(e){return e.is(t)})):this._types.find((function(e){return e.is(t)}))},Te.prototype.isValidSnapshot=function(t,e){if(this._dispatcher)return this._dispatcher(t).validate(t,e);for(var n=[],i=0,r=0;r<this._types.length;r++){var o=this._types[r].validate(t,e);if(0===o.length){if(this._eager)return dt;i++}else n.push(o)}return 1===i?dt:Q(e,t,"No type is applicable for the union").concat(X(n))},Te.prototype.getSubTypes=function(){return this._types},Te);function Te(t,e,n){var i=je.call(this,t)||this;return i._types=e,i._eager=!0,n=u({eager:!0,dispatcher:void 0},n),i._dispatcher=n.dispatcher,n.eager||(i._eager=!1),i}function Ee(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=H(t)?void 0:t,r=H(t)?f([t],e):e,o="("+r.map((function(t){return t.name})).join(" | ")+")";return new Ce(o,r,i)}var Ve,Ne=(p(De,Ve=E),Object.defineProperty(De.prototype,"flags",{get:function(){return this._subtype.flags|P.Optional},enumerable:!0,configurable:!0}),De.prototype.describe=function(){return this._subtype.describe()+"?"},De.prototype.instantiate=function(t,e,n,i){if(0<=this.optionalValues.indexOf(i)){var r=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(t,e,n,r)}return this._subtype.instantiate(t,e,n,i)},De.prototype.reconcile=function(t,e,n,i){return this._subtype.reconcile(t,this.optionalValues.indexOf(e)<0&&this._subtype.is(e)?e:this.getDefaultInstanceOrSnapshot(),n,i)},De.prototype.getDefaultInstanceOrSnapshot=function(){var t="function"==typeof this._defaultValue?this._defaultValue():this._defaultValue;return"function"==typeof this._defaultValue&&tt(this,t),t},De.prototype.isValidSnapshot=function(t,e){return 0<=this.optionalValues.indexOf(t)?dt:this._subtype.validate(t,e)},De.prototype.isAssignableFrom=function(t){return this._subtype.isAssignableFrom(t)},De.prototype.getSubTypes=function(){return this._subtype},De);function De(t,e,n){var i=Ve.call(this,t.name)||this;return i._subtype=t,i._defaultValue=e,i.optionalValues=n,i}function xe(t,e,n){return function(t,e){if("function"!=typeof e&&pt(e))throw bt("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead");F()}(0,e),new Ne(t,e,n||ke)}var ke=[void 0],ze=xe(be,void 0),Re=xe(ve,null);function He(t){return F(),Ee(t,ze)}var Fe,Me=(p(Ue,Fe=E),Object.defineProperty(Ue.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|P.Late},enumerable:!0,configurable:!0}),Ue.prototype.getSubType=function(t){if(!this._subType){var e=void 0;try{e=this._definition()}catch(t){if(!(t instanceof ReferenceError))throw t;e=void 0}if(t&&void 0===e)throw bt("Late type seems to be used too early, the definition (still) returns undefined");e&&(this._subType=e)}return this._subType},Ue.prototype.instantiate=function(t,e,n,i){return this.getSubType(!0).instantiate(t,e,n,i)},Ue.prototype.reconcile=function(t,e,n,i){return this.getSubType(!0).reconcile(t,e,n,i)},Ue.prototype.describe=function(){var t=this.getSubType(!1);return t?t.name:"<uknown late type>"},Ue.prototype.isValidSnapshot=function(t,e){var n=this.getSubType(!1);return n?n.validate(t,e):dt},Ue.prototype.isAssignableFrom=function(t){var e=this.getSubType(!1);return!!e&&e.isAssignableFrom(t)},Ue.prototype.getSubTypes=function(){return this.getSubType(!1)||T},Ue);function Ue(t,e){var n=Fe.call(this,t)||this;return n._definition=e,n}var Le,We=(p(Ke,Le=z),Ke.prototype.describe=function(){return"<any immutable value>"},Ke.prototype.instantiate=function(t,e,n,i){return st(this,t,e,n,i)},Ke.prototype.isValidSnapshot=function(t,e){return"function"==typeof t?Q(e,t,"Value is not serializable and cannot be frozen"):this.subType?this.subType.validate(t,e):dt},Ke);function Ke(t){var e=Le.call(this,t?"frozen("+t.name+")":"frozen")||this;return e.subType=t,e.flags=P.Frozen,e}var Ge=new We,Ye=(Ze.prototype.updateResolvedReference=function(t){var e=""+this.identifier,n=t.root,i=n.identifierCache.getLastCacheModificationPerId(e);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==i){var r=this.targetType,o=n.identifierCache.resolve(r,e);if(!o)throw new Be("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+t.path+")");this.resolvedReference={node:o,lastCacheModification:i}}},Object.defineProperty(Ze.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!0,configurable:!0}),Ze);function Ze(t,e){if(this.targetType=e,mn(t))this.identifier=t;else{if(!pt(t))throw bt("Can only store references to tree nodes or identifiers, got: '"+t+"'");var n=ct(t);if(!n.identifierAttribute)throw bt("Can only store references with a defined identifier attribute.");var i=n.unnormalizedIdentifier;if(null==i)throw bt("Can only store references to tree nodes with a defined identifier.");this.identifier=i}}var $e,Be=(p(Je,$e=Error),Je);function Je(t){var e=$e.call(this,t)||this;return Object.setPrototypeOf(e,Je.prototype),e}var qe,Qe=(p(Xe,qe=z),Xe.prototype.describe=function(){return this.name},Xe.prototype.isAssignableFrom=function(t){return this.targetType.isAssignableFrom(t)},Xe.prototype.isValidSnapshot=function(t,e){return mn(t)?dt:Q(e,t,"Value is not a valid identifier, which is a string or a number")},Xe.prototype.fireInvalidated=function(t,e,n,i){var r,o=e.parent;o&&o.isAlive&&(r=o.storedValue)&&this.onInvalidated({cause:t,parent:r,invalidTarget:i?i.storedValue:void 0,invalidId:n,replaceRef:function(t){v(e.root.storedValue,{op:"replace",value:t,path:e.path})},removeRef:function(){!function(t){return H(t)&&0<(t.flags&P.Object)}(o.type)?v(e.root.storedValue,{op:"remove",path:e.path}):this.replaceRef(void 0)}})},Xe.prototype.addTargetNodeWatcher=function(t,e){var n=this,i=this.getValue(t);if(i){var o=ct(i),a=function(i,a){var s=function(t){switch(t){case r.beforeDestroy:return"destroy";case r.beforeDetach:return"detach";default:return}}(a);s&&n.fireInvalidated(s,t,e,o)},s=o.registerHook(r.beforeDetach,a),p=o.registerHook(r.beforeDestroy,a);return function(){s(),p()}}},Xe.prototype.watchTargetNodeForInvalidations=function(t,e,n){var i,o,a=this;this.onInvalidated&&(t.registerHook(r.beforeDestroy,(function(){i&&i()})),o=function(r){i&&i();var o=t.parent,s=o&&o.storedValue;o&&o.isAlive&&s&&((n?n.get(e,s):t.root.identifierCache.has(a.targetType,""+e))?i=a.addTargetNodeWatcher(t,e):r||a.fireInvalidated("invalidSnapshotReference",t,e,null))},t.state===et.FINALIZED?o(!0):(t.isRoot||t.root.registerHook(r.afterCreationFinalization,(function(){t.parent&&t.parent.createObservableInstanceIfNeeded()})),t.registerHook(r.afterAttach,(function(){o(!1)}))))},Xe);function Xe(t,e){var n=qe.call(this,"reference("+t.name+")")||this;return n.targetType=t,n.onInvalidated=e,n.flags=P.Reference,n}var tn,en=(p(nn,tn=Qe),nn.prototype.getValue=function(t){if(t.isAlive)return t.storedValue.resolvedValue},nn.prototype.getSnapshot=function(t){return t.storedValue.identifier},nn.prototype.instantiate=function(t,e,n,i){var r,o=pt(i)?(ut(r=i),ct(r).identifier):i,a=new Ye(i,this.targetType),s=st(this,t,e,n,a);return a.node=s,this.watchTargetNodeForInvalidations(s,o,void 0),s},nn.prototype.reconcile=function(t,e,n,i){if(!t.isDetaching&&t.type===this){var r=pt(e),o=t.storedValue;if(!r&&o.identifier===e||r&&o.resolvedValue===e)return t.setParent(n,i),t}var a=this.instantiate(n,i,void 0,e);return t.die(),a},nn);function nn(t,e){return tn.call(this,t,e)||this}var rn,on=(p(an,rn=Qe),an.prototype.getValue=function(t){if(t.isAlive)return this.options.get(t.storedValue,t.parent?t.parent.storedValue:null)},an.prototype.getSnapshot=function(t){return t.storedValue},an.prototype.instantiate=function(t,e,n,i){var r=pt(i)?this.options.set(i,t?t.storedValue:null):i,o=st(this,t,e,n,r);return this.watchTargetNodeForInvalidations(o,r,this.options),o},an.prototype.reconcile=function(t,e,n,i){var r=pt(e)?this.options.set(e,t?t.storedValue:null):e;if(!t.isDetaching&&t.type===this&&t.storedValue===r)return t.setParent(n,i),t;var o=this.instantiate(n,i,void 0,r);return t.die(),o},an);function an(t,e,n){var i=rn.call(this,t,n)||this;return i.options=e,i}function sn(t,e){F();var n=e||void 0,i=e?e.onInvalidated:void 0;return n&&(n.get||n.set)?new on(t,{get:n.get,set:n.set},i):new en(t,i)}var pn,un=(p(cn,pn=z),cn.prototype.instantiate=function(t,e,n,i){if(!(t&&t.type instanceof se))throw bt("Identifier types can only be instantiated as direct child of a model type");return st(this,t,e,n,i)},cn.prototype.reconcile=function(t,e,n,i){if(t.storedValue!==e)throw bt("Tried to change identifier from '"+t.storedValue+"' to '"+e+"'. Changing identifiers is not allowed.");return t.setParent(n,i),t},cn.prototype.isValidSnapshot=function(t,e){return typeof t!==this.validType?Q(e,t,"Value is not a valid "+this.describe()+", expected a "+this.validType):dt},cn);function cn(t,e){var n=pn.call(this,t)||this;return n.validType=e,n.flags=P.Identifier,n}var hn,ln=(p(fn,hn=un),fn.prototype.describe=function(){return"identifier"},fn);function fn(){var t=hn.call(this,"identifier","string")||this;return t.flags=P.Identifier,t}var dn,yn=(p(vn,dn=un),vn.prototype.getSnapshot=function(t){return t.storedValue},vn.prototype.describe=function(){return"identifierNumber"},vn);function vn(){return dn.call(this,"identifierNumber","number")||this}var bn=new ln,gn=new yn;function mn(t){return"string"==typeof t||"number"==typeof t}var wn,_n=(p(Sn,wn=z),Sn.prototype.describe=function(){return this.name},Sn.prototype.isValidSnapshot=function(t,e){if(this.options.isTargetType(t))return dt;var n=this.options.getValidationMessage(t);return n?Q(e,t,"Invalid value for type '"+this.name+"': "+n):dt},Sn.prototype.getSnapshot=function(t){return this.options.toSnapshot(t.storedValue)},Sn.prototype.instantiate=function(t,e,n,i){return st(this,t,e,n,this.options.isTargetType(i)?i:this.options.fromSnapshot(i))},Sn.prototype.reconcile=function(t,e,n,i){var r=!this.options.isTargetType(e);if(!t.isDetaching&&t.type===this&&(r?e===t.snapshot:e===t.storedValue))return t.setParent(n,i),t;var o=r?this.options.fromSnapshot(e):e,a=this.instantiate(n,i,void 0,o);return t.die(),a},Sn);function Sn(t){var e=wn.call(this,t.name)||this;return e.options=t,e.flags=P.Custom,e}var Pn={enumeration:function(t,e){var n="string"==typeof t?e:t,i=Ee.apply(void 0,f(n.map((function(t){return Pe(""+t)}))));return"string"==typeof t&&(i.name=t),i},model:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"==typeof t[0]?t.shift():"AnonymousModel",i=t.shift()||{};return new se({name:n,properties:i})},compose:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"==typeof t[0],i=n?t[0]:"AnonymousModel";return n&&t.shift(),t.reduce((function(t,e){return t.cloneAndEnhance({name:t.name+"_"+e.name,properties:e.properties,initializers:e.initializers,preProcessor:function(n){return e.applySnapshotPreProcessor(t.applySnapshotPreProcessor(n))},postProcessor:function(n){return e.applySnapshotPostProcessor(t.applySnapshotPostProcessor(n))}})})).named(i)},custom:function(t){return new _n(t)},reference:sn,safeReference:function(t,e){var n=sn(t,u(u({},e),{onInvalidated:function(t){t.removeRef()}}));return e&&!1===e.acceptsUndefined?n:He(n)},union:Ee,optional:xe,literal:Pe,maybe:He,maybeNull:function(t){return F(),Ee(t,Re)},refinement:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="string"==typeof t[0]?t.shift():H(t[0])?t[0].name:null,i=t[0],r=t[1],o=t[2]?t[2]:function(t){return"Value does not respect the refinement predicate"};return F(),xt(),new Ie(n,i,r,o)},string:le,boolean:ye,number:fe,integer:de,Date:we,map:function(t){return new $t("map<string, "+t.name+">",t)},array:function(t){return F(),new qt(t.name+"[]",t)},frozen:function(t){return 0===arguments.length?Ge:H(t)?new We(t):xe(Ge,t)},identifier:bn,identifierNumber:gn,late:function(t,e){var n="string"==typeof t?t:"late("+t.toString()+")";return new Me(n,"string"==typeof t?e:t)},undefined:be,null:ve,snapshotProcessor:function(t,e,n){return F(),new Ft(t,e,n)}}}).call(this,n(245),n(940).setImmediate)}}]);